---
title: 功能模块清单
version: v0.1.0
module: planning
author: 全员
date: 2026-02-27
status: in-progress
---

# 功能模块清单

本文档列出 FinClaw Commons Hub 所有功能模块的规划状态、负责人、优先级及所属 Roadmap Phase。

> **适用范围**：下方"模块总览"部分描述的是 **FinClaw Commons Hub Web 项目**（Next.js/Supabase 技术栈）。OpenFinClaw 金融扩展的当前状态请见本文档末尾的 [OpenFinClaw 金融扩展](#openfinclaw-金融扩展) 章节。

---

## 模块总览

| 模块             | 路径                                                                               | 状态      | 负责人 | 优先级 | 依赖                | Phase   |
| ---------------- | ---------------------------------------------------------------------------------- | --------- | ------ | ------ | ------------------- | ------- |
| Auth 认证系统    | `src/app/[locale]/auth/`, `src/app/auth/`, `src/server/auth/`, `src/app/api/auth/` | 🟡 80%    | TBD    | P0     | Supabase            | Phase 1 |
| Arena 竞技引擎   | `src/app/[locale]/arena/`, `src/app/api/arena/`, `src/server/arena/`               | 🟡 65%    | TBD    | P0     | Auth, Entries       | Phase 2 |
| Entries 技能注册 | `src/app/[locale]/entries/`, `src/server/entries/`, `src/components/entries/`      | 🟡 50%    | TBD    | P0     | Auth, DB            | Phase 1 |
| Dashboard 仪表盘 | `src/app/[locale]/dashboard/`                                                      | 🟡 40%    | TBD    | P1     | Auth, Entries       | Phase 1 |
| i18n 国际化      | `messages/`, `src/i18n/`, `src/components/i18n/`                                   | 🟡 70%    | TBD    | P1     | —                   | Phase 1 |
| FCS 评分系统     | `src/core/fcs-*.ts` (待迁移)                                                       | ✅ 100%   | —      | —      | Entries             | Phase 1 |
| CLI 工具链       | `src/cli/` (旧版)                                                                  | ✅ 100%   | —      | —      | Core Engine         | Phase 1 |
| 生命周期引擎     | `src/core/lifecycle-engine.ts` (旧版)                                              | ✅ 100%   | —      | —      | FCS, Entries        | Phase 1 |
| 数据持久化       | `sql/`, Drizzle ORM                                                                | ✅ 100%   | —      | —      | PostgreSQL          | Phase 1 |
| 策略交易         | 规划中                                                                             | 🔜 0%     | TBD    | P2     | Arena, Auth, FCS    | Phase 3 |
| 进化系统         | 规划中                                                                             | 🟡 开发中 | TBD    | P2     | Arena, Entries, FCS | Phase 4 |

### 状态图例

| 图标 | 含义                   |
| ---- | ---------------------- |
| ✅   | 已完成（100%）         |
| 🟡   | 开发中（1%~99%）       |
| 🔜   | 规划中（0%，尚未启动） |

---

## 模块详情

### 1. Auth 认证系统 — 🟡 80%

**职责**：用户认证、会话管理、权限控制。

| 子模块           | 状态 | 说明                               |
| ---------------- | ---- | ---------------------------------- |
| Email + OTP 登录 | ✅   | Supabase Auth, OTP 发送/验证 API   |
| Google OAuth     | ✅   | 已集成 Google 第三方登录           |
| Session 管理     | ✅   | SSR cookie-based session, JWT 验证 |
| Auth Callback    | ✅   | OAuth 回调处理                     |
| Logout           | ✅   | 注销流程                           |
| Web3 Wallet 登录 | 🔜   | 规划中，待接入                     |
| RBAC 权限控制    | 🟡   | 5 角色已设计，前端鉴权待完善       |

**关键文件**：

- `src/app/[locale]/auth/login/` — 登录页面及表单
- `src/app/[locale]/auth/logout/` — 注销页面
- `src/app/auth/callback/route.ts` — OAuth 回调
- `src/app/api/send-otp/route.ts` — OTP 发送
- `src/app/api/verify-otp/route.ts` — OTP 验证
- `src/app/api/auth/session/route.ts` — Session API
- `src/server/auth/supabase-jwt.ts` — JWT 验证

### 2. Arena 竞技引擎 — 🟡 65%

**职责**：策略对战、ELO 评级、排行榜、提交管理。

| 子模块           | 状态 | 说明                                       |
| ---------------- | ---- | ------------------------------------------ |
| Arena 页面 UI    | ✅   | SSR 排行榜、客户端交互                     |
| Leaderboard API  | ✅   | GET 排行榜（筛选/排序）                    |
| Submit API       | ✅   | POST 提交策略                              |
| Queue 管理       | ✅   | 提交队列 & 状态查询                        |
| Evolution API    | 🟡   | 进化触发 & 查询                            |
| Submissions 管理 | ✅   | 提交记录查询                               |
| ELO 计算引擎     | 🟡   | 核心算法已实现，待迁移到 Next.js           |
| 6 市场场景 PK    | 🟡   | Bull/Bear/Sideways/Volatile/Crash/Recovery |

**关键文件**：

- `src/app/[locale]/arena/` — Arena 页面
- `src/app/api/arena/` — Arena API 路由
- `src/server/arena/http-client.ts` — Arena 服务代理

### 3. Entries 技能注册 — 🟡 50%

**职责**：技能的发布、发现、浏览与管理。

| 子模块        | 状态 | 说明                        |
| ------------- | ---- | --------------------------- |
| 技能浏览页    | ✅   | 公开技能列表                |
| 技能详情页    | 🟡   | 基础展示已完成，待增强      |
| 技能发布流程  | 🟡   | Dashboard 中的 publish 页面 |
| 技能搜索/筛选 | 🔜   | 全文搜索待接入              |
| 技能注册服务  | ✅   | 服务端 Registry 逻辑        |

**关键文件**：

- `src/app/[locale]/entries/page.tsx` — 技能浏览
- `src/components/entries/entries-explorer.tsx` — 技能列表组件
- `src/server/entries/registry.ts` — 注册服务

### 4. Dashboard 仪表盘 — 🟡 40%

**职责**：用户个人中心、技能管理、设置。

| 子模块             | 状态 | 说明                 |
| ------------------ | ---- | -------------------- |
| Dashboard 首页     | 🟡   | 基础布局已完成       |
| 我的技能 (entries) | 🟡   | 技能列表页已创建     |
| 发布技能 (publish) | 🟡   | 发布页面已创建       |
| 设置 (settings)    | 🟡   | 设置页面已创建       |
| 数据聚合 / 统计    | 🔜   | 仪表盘数据图表待开发 |

**关键文件**：

- `src/app/[locale]/dashboard/` — Dashboard 路由
- `src/app/[locale]/dashboard/layout.tsx` — Dashboard 布局

### 5. i18n 国际化 — 🟡 70%

**职责**：多语言支持（EN / ZH-CN）。

| 子模块         | 状态 | 说明                                 |
| -------------- | ---- | ------------------------------------ |
| next-intl 集成 | ✅   | 路由级 i18n，`[locale]` 动态参数     |
| 翻译文件       | 🟡   | EN / ZH-CN 基础 key 已覆盖，持续补充 |
| 语言切换器     | ✅   | LanguageSwitcher 组件                |
| i18n-ally 支持 | ✅   | VS Code 插件配置                     |

**关键文件**：

- `messages/en.json` / `messages/zh-CN.json` — 翻译文件
- `src/i18n/request.ts` — next-intl 配置
- `src/components/i18n/language-switcher.tsx` — 切换组件

### 6. FCS 评分系统 — ✅ 100%

**职责**：4 维度复合评分（Quality / Usage / Social / Freshness），类型权重覆盖，反作弊机制。

> 核心引擎已在旧版 (`src/core/fcs-*.ts`) 完成。Next.js 迁移后将作为 API 暴露。

### 7. CLI 工具链 — ✅ 100%

**职责**：12+ 命令行工具（list, search, install, publish, score, lifecycle, arena 等）。

> 已在旧版 (`src/cli/`) 完成，基于 Commander。独立运行，不受 Next.js 迁移影响。

### 8. 生命周期引擎 — ✅ 100%

**职责**：Seedling → Growing → Established 状态机，含降级 / 归档 / 下架逻辑。

> 已在旧版 (`src/core/lifecycle-engine.ts`) 完成。

### 9. 数据持久化 — ✅ 100%

**职责**：PostgreSQL 数据库，20 张表，Drizzle ORM，全文搜索。

**关键文件**：

- `sql/init/` — 数据库初始化
- `sql/migration/` — 迁移脚本

### 10. 策略交易 — 🔜 0%

**职责**：FinCredit 经济体系、策略定价、收入分成。

> Phase 3 规划，依赖 Arena 和 Auth 模块完成。

**规划内容**：

- FinCredit 虚拟货币系统
- 策略定价 & 购买流程
- 收入分成机制
- 交易记录 & 账单

### 11. 进化系统 — 🔜 0%

**职责**：策略 Fork、遗传优化、多维度排名。

> Phase 4 规划，依赖 Arena 和 Entries 模块完成。

**规划内容**：

- 策略 Fork & 版本管理
- 遗传算法优化引擎
- 进化谱系可视化
- 多维度排名系统

---

## Roadmap Phase 说明

| Phase       | 名称     | 时间范围       | 核心目标                            | 模块                                                    |
| ----------- | -------- | -------------- | ----------------------------------- | ------------------------------------------------------- |
| **Phase 1** | 基础平台 | 当前           | 完成 Next.js 迁移，搭建核心用户体验 | Auth, Entries, Dashboard, i18n, FCS, CLI, Lifecycle, DB |
| **Phase 2** | 竞技系统 | Phase 1 完成后 | Arena 竞技引擎全功能上线            | Arena                                                   |
| **Phase 3** | 交易经济 | Phase 2 完成后 | FinCredit 策略交易市场              | 策略交易                                                |
| **Phase 4** | 进化生态 | Phase 3 完成后 | 社区驱动的策略进化系统              | 进化系统                                                |

### Phase 依赖关系

```
Phase 1 (基础平台)
    ├── Auth ──────────┐
    ├── Entries ───────┤
    ├── Dashboard ─────┤
    ├── i18n ──────────┤
    ├── FCS ───────────┤
    ├── CLI ───────────┤
    ├── Lifecycle ─────┤
    └── DB ────────────┘
            │
            ▼
Phase 2 (竞技系统)
    └── Arena ─────────┐
            │          │
            ▼          │
Phase 3 (交易经济)     │
    └── 策略交易 ──────┤
            │          │
            ▼          │
Phase 4 (进化生态)     │
    └── 进化系统 ◄─────┘
```

---

---

## OpenFinClaw 金融扩展

OpenFinClaw 的金融能力通过 `extensions/fin-*` 插件和 `skills/fin-*` 技能实现，遵循**零核心侵入**原则。

### 金融扩展 (14)

| 扩展                   | 用途                                        | 状态      |
| ---------------------- | ------------------------------------------- | --------- |
| `fin-core`             | 交易所注册、风控器、CCXT 桥接、共享类型     | ✅ 已完成 |
| `fin-trading`          | 订单执行 + 风控门控（Binance/OKX/Bybit/HL） | ✅ 已完成 |
| `fin-portfolio`        | 余额聚合、绩效指标、再平衡                  | ✅ 已完成 |
| `fin-market-data`      | 行情推送、OHLCV、市场深度                   | ✅ 已完成 |
| `fin-expert-sdk`       | 专业分析 API 桥接                           | ✅ 已完成 |
| `fin-info-feed`        | 市场情报、情绪分析、财报数据                | ✅ 已完成 |
| `fin-monitoring`       | 价格警报、组合健康检查、异常检测            | ✅ 已完成 |
| `fin-data-bus`         | 统一数据提供者、OHLCV 缓存、市场体制检测    | ✅ 已完成 |
| `fin-evolution-engine` | GEP 基因进化、LLM 变异、RDAVD 适应度        | 🟡 开发中 |
| `fin-fund-manager`     | 资金流跟踪、绩效快照                        | 🟡 开发中 |
| `fin-openbb-data`      | OpenBB 数据桥接（162+ fetcher, 38+ 供应商） | 🟡 开发中 |
| `fin-paper-trading`    | 多市场模拟盘（美股/港股/A股/加密）          | 🟡 开发中 |
| `fin-strategy-engine`  | 策略注册、回测引擎、自定义规则引擎          | 🟡 开发中 |
| `fin-strategy-memory`  | 策略持久化、时间衰减适应度评分              | 🟡 开发中 |

### 金融技能 (9)

| 技能              | 用途                   | 状态      |
| ----------------- | ---------------------- | --------- |
| `fin-alerts`      | 实时警报、价格触发器   | ✅ 已完成 |
| `fin-budget`      | 预算、支出分析、现金流 | ✅ 已完成 |
| `fin-expert`      | 机构级分析             | ✅ 已完成 |
| `fin-market-data` | 行情查询、技术分析     | ✅ 已完成 |
| `fin-portfolio`   | 组合分析、再平衡       | ✅ 已完成 |
| `fin-report`      | 自动日报/周报/月报     | ✅ 已完成 |
| `fin-screener`    | 证券筛选、量化排名     | ✅ 已完成 |
| `fin-trading`     | 交易执行、订单管理     | ✅ 已完成 |
| `fin-watchlist`   | 自选股管理             | ✅ 已完成 |

---

## 更新记录

| 日期       | 版本   | 变更                                            |
| ---------- | ------ | ----------------------------------------------- |
| 2026-02-28 | v0.2.0 | 新增 OpenFinClaw 金融扩展章节，更新进化系统状态 |
| 2026-02-27 | v0.1.0 | 初始版本，基于代码库现状建立模块清单            |
