# Consolidated Review (2026-02-27)

## Critical

1. **Secret exposure in tracked env file**
   - **Path**: [deploy/.env.local](/Users/gumpm5/Documents/Code/openFinclaw/deploy/.env.local):15 (also 23-24, 28-29)
   - **Severity**: critical
   - **Category**: Diff
   - **Description**: Real credentials/tokens are committed (`LITELLM_API_KEY`, `SUPABASE_SERVICE_ROLE_KEY`, encryption key, Binance keys). This is an immediate credential leakage risk.
   - **Suggested fix**: Remove tracked secrets from git history and repo, replace with `deploy/.env.example` placeholders, add `deploy/.env.local` to `.gitignore`, and rotate all exposed keys immediately.

## High

1. **Tracked local UI env override**
   - **Path**: [ui/.env.local](/Users/gumpm5/Documents/Code/openFinclaw/ui/.env.local):1
   - **Severity**: high
   - **Category**: Diff
   - **Description**: Local env override is tracked with a hardcoded external API host (`VITE_XPLATFORM_API_URL=http://43.134.61.136:7098`). This can leak internal infra and force wrong endpoint usage for other devs/CI.
   - **Suggested fix**: Untrack `ui/.env.local`, add it to `.gitignore`, and keep only `ui/.env.example` with placeholder values.

2. **Repo metadata identity drift**
   - **Path**: [package.json](/Users/gumpm5/Documents/Code/openFinclaw/package.json):14,16,22; [README.md](/Users/gumpm5/Documents/Code/openFinclaw/README.md):18
   - **Severity**: high
   - **Category**: Holistic
   - **Description**: Canonical repo identity is inconsistent (`cryptoSUN2049` in README badges, `AICoinvestor` in npm metadata). This breaks issue routing and automation assumptions.
   - **Suggested fix**: Define one canonical slug/owner and update `homepage`, `bugs.url`, `repository.url`, and README badges/links in one pass; add a CI check that validates repo URLs.

3. **Security reporting routes to upstream**
   - **Path**: [SECURITY.md](/Users/gumpm5/Documents/Code/openFinclaw/SECURITY.md):9,16; [CONTRIBUTING.md](/Users/gumpm5/Documents/Code/openFinclaw/CONTRIBUTING.md):130
   - **Severity**: high
   - **Category**: Holistic
   - **Description**: Vulnerability reporting currently routes to upstream OpenClaw channels/email, not this fork. That can delay or lose security reports.
   - **Suggested fix**: Add fork-specific `SECURITY.md` + `CONTRIBUTING.md` section with your own repo and security contact, and explicit upstream-coordination instructions if needed.

4. **Root agent policy targets upstream repo/infra**
   - **Path**: [AGENTS.md](/Users/gumpm5/Documents/Code/openFinclaw/AGENTS.md):3,47,127
   - **Severity**: high
   - **Category**: Holistic
   - **Description**: Root agent policy is heavily upstream-specific (`openclaw/openclaw`, release/ops commands, GH queries), so agents can act on the wrong repo/infra.
   - **Suggested fix**: Split into fork-local policy vs upstream-reference appendix; replace hardcoded upstream commands/URLs with fork defaults and only keep upstream steps when explicitly labeled.

## Medium

1. **New tests not included in Vitest include list**
   - **Path**: [vitest.config.ts](/Users/gumpm5/Documents/Code/openFinclaw/vitest.config.ts):36-43
   - **Severity**: medium
   - **Category**: Diff
   - **Description**: New tests were added (for external-link/open-external-url/chat-image-open) but are not included in Vitest `include`; only `ui/src/ui/views/agents-utils.test.ts` was added. These new security tests will not run in CI.
   - **Suggested fix**: Add the new UI test paths to `include` (or switch to a safe `ui/src/ui/**/*.test.ts` pattern with explicit excludes as needed).

2. **Missing CLAUDE.md symlinks next to AGENTS.md in docs**
   - **Path**: [AGENTS.md](/Users/gumpm5/Documents/Code/openFinclaw/AGENTS.md):164; dirs `docs/ja-JP`, `docs/zh-CN`, `docs/reference/templates`
   - **Severity**: medium
   - **Category**: Holistic
   - **Description**: Policy says every `AGENTS.md` should have a `CLAUDE.md` symlink, but docs subtrees have `AGENTS.md` without corresponding symlinks.
   - **Suggested fix**: Add `CLAUDE.md -> AGENTS.md` in each subtree that contains `AGENTS.md`, or relax the policy text to define exceptions (e.g., generated docs trees).

3. **Dead-code scanning job disabled**
   - **Path**: [.github/workflows/ci.yml](/Users/gumpm5/Documents/Code/openFinclaw/.github/workflows/ci.yml):268,272
   - **Severity**: medium
   - **Category**: Holistic
   - **Description**: Dead-code scanning job is fully disabled (`if: false`), so dead code can silently accumulate.
   - **Suggested fix**: Re-enable as non-blocking artifact upload first, then gate on deltas or agreed thresholds.

4. **Coverage exclusions hide high-risk surfaces**
   - **Path**: [vitest.config.ts](/Users/gumpm5/Documents/Code/openFinclaw/vitest.config.ts):70,90,119
   - **Severity**: medium
   - **Category**: Holistic
   - **Description**: Coverage excludes large/high-risk surfaces (`src/agents/**`, `src/gateway/**`, channels, providers), while thresholds are applied only to remaining subset. This can overstate confidence.
   - **Suggested fix**: Keep exclusions for hard-to-unit-test paths, but add targeted integration coverage goals per excluded subsystem and track them in CI/reporting.

## Low

1. **Quick start lacks a first-run verification step**
   - **Path**: [README.md](/Users/gumpm5/Documents/Code/openFinclaw/README.md):233
   - **Severity**: low
   - **Category**: Holistic
   - **Description**: Quick start stops at install and does not provide a “first successful run/verification” step, reducing newcomer and agent bootstrap reliability.
   - **Suggested fix**: Add a minimal first-run path (`pnpm openfinclaw ...` + expected output) and a smoke-check command.

---

### Summary

- **Total issues**: 10
- **Critical**: 1
- **High**: 4
- **Medium**: 4
- **Low**: 1
- **Agents run**: Diff Review, Holistic Review
- **Overall assessment**: Security hygiene (tracked secrets) and fork identity drift are the highest-risk items; address those first, then tighten test inclusion and agent policy alignment.
