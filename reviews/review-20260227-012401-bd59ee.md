# Consolidated Code Review

## Findings

### High

- **Path:** [extensions/fin-core/index.ts](/Users/gumpm5/Documents/Code/openFinclaw/extensions/fin-core/index.ts:118)  
  **Severity:** high  
  **Category:** Diff  
  **Description:** `api.registerHook("before_tool_call", "fin-risk-gate", async (ctx) => { ... })` passes a string where a handler function is expected. The `registerHook` signature is `(events, handler, opts)`, so this will register a string as the handler and either throw or no-op, disabling the risk gate.  
  **Suggested fix:** Pass the name via options and keep the handler as the second argument:
  ```ts
  api.registerHook(
    "before_tool_call",
    async (ctx) => {
      /* ... */
    },
    { name: "fin-risk-gate" },
  );
  ```
  If you intended a new `(events, name, handler)` overload, update `OpenClawPluginApi.registerHook` and `registry.registerHook` to support it consistently and adjust all call sites.

### Medium

- **Path:** [package.json](/Users/gumpm5/Documents/Code/openFinclaw/package.json)  
  **Severity:** medium  
  **Category:** Holistic  
  **Description:** Repository URLs are inconsistent (`homepage` points to `cryptoSUN2049/openFinclaw` while `repository` and `bugs.url` point to `AICoinvestor/openfinclaw`). This can misroute issues and automation.  
  **Suggested fix:** Align `homepage`, `repository.url`, and `bugs.url` to the canonical repo for this fork.

### Low

- **Path:** [AGENTS.md](/Users/gumpm5/Documents/Code/openFinclaw/AGENTS.md)  
  **Severity:** low  
  **Category:** Holistic  
  **Description:** The repo is a fork, but guidelines hardcode `Repo: https://github.com/openclaw/openclaw`. This may cause agents to search/triage in upstream instead of this repo.  
  **Suggested fix:** Add a short note that this fork’s canonical repo is `openFinclaw` and clarify when to reference upstream vs fork.

- **Path:** [SECURITY.md](/Users/gumpm5/Documents/Code/openFinclaw/SECURITY.md)  
  **Severity:** low  
  **Category:** Holistic  
  **Description:** Security reporting instructions point exclusively to `openclaw/*` repos and `security@openclaw.ai`. For a fork, this may not be correct and could leak or misroute reports.  
  **Suggested fix:** Add a fork-specific section stating whether to report to upstream or to this fork’s maintainers, and list the correct contact/repo for this fork.

## Summary

- **Total issues:** 4
- **By severity:** 0 critical, 1 high, 1 medium, 2 low
- **Agents:** Diff (Agent 1), Holistic (Agent 2)
- **Overall assessment:** One high-severity functional bug in changed code; the rest are fork hygiene/docs metadata issues.
